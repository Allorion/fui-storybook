import{j as e}from"./jsx-runtime-DEdD30eg.js";import{r as m}from"./index-RYns6xqu.js";import{F as C}from"./FArrowIcon-q9p_-0kR.js";import{F as N}from"./FLoadIcon-DK9LdIdw.js";import{F as b}from"./FStack-DUahO965.js";const L=({fetchingFunc:c,selectedElement:j,selectItem:x,st:u,id:T,className:v,disabled:y,readOnly:q,fullWidth:S,label:w,onBlur:E,onFocus:F,errText:i,helpText:g,minLengthText:p,required:H,defaultValue:a})=>{const[I,h]=m.useState(""),[f,o]=m.useState([]),r=m.useRef(),[l,n]=m.useState(!1);m.useEffect(()=>{a!==void 0&&(h(a),r.current&&clearTimeout(r.current),a!==""?p!==void 0&&a.length===p?r.current=setTimeout(()=>{n(!0),c(a).then(t=>{o(t),n(!1)})},5e3):r.current=setTimeout(()=>{n(!0),c(a).then(t=>{o(t),n(!1)})},5e3):(o([]),n(!1)))},[a]);const R=t=>{const s=t.target.value;h(s),r.current&&clearTimeout(r.current),s!==""?p!==void 0&&s.length===p?r.current=setTimeout(()=>{n(!0),c(s).then(d=>{o(d),n(!1)})},5e3):r.current=setTimeout(()=>{n(!0),c(s).then(d=>{o(d),n(!1)})},5e3):(n(!0),c(s).then(()=>{o([]),n(!1)}))};return u=Object.assign({},u,{whiteSpace:"nowrap",textOverflow:"ellipsis",width:"fit-content"}),S&&(u.width="100%"),e.jsxs("div",{className:`select-search-db ${v!==void 0?v:""} ${l?"ui left icon input loading":""}`,style:u,id:T,children:[w&&e.jsx("label",{className:"control-label with-offset",style:{whiteSpace:"nowrap",textOverflow:"ellipsis"},children:w}),e.jsxs("div",{className:"select-search-db-input-block",children:[e.jsx("input",{readOnly:q,disabled:y||l,required:H,style:{borderColor:i!==void 0&&i.length>0?"red":"#C4C4C4"},type:"text",className:"form-control select-search-db-input",value:l?"":I,onChange:R,onFocus:F,onBlur:E}),!l&&!y&&e.jsx("div",{className:"select-search-db-input-arrow",children:e.jsx(C,{direction:"down",size:15})}),l&&e.jsx("div",{className:"select-search-db-input-load",children:e.jsx(N,{size:10})})]}),f.length===0&&!y&&e.jsx("div",{className:"select-search-db-dropdown",children:e.jsx("li",{children:"Введите текст"})}),!l&&f!==void 0&&f.length>0&&e.jsx("div",{className:"select-search-db-dropdown active",children:e.jsx(b,{direction:"column",st:{paddingLeft:"11px"},children:f.slice(0,10).map((t,s)=>e.jsx("li",{onClick:d=>{j(t),h(d.target.textContent)},children:x(t)},s))})}),g!==void 0&&e.jsx("span",{style:{whiteSpace:"initial",color:"#a6a3a3",fontSize:"12px"},children:g}),i!==void 0&&i.length>0&&e.jsx(b,{direction:"column",st:{paddingLeft:"11px"},children:i==null?void 0:i.map((t,s)=>e.jsx("span",{style:{whiteSpace:"initial",color:"red"},children:t},s))})]})};L.__docgenInfo={description:"",methods:[],displayName:"FSelectSearchDb",props:{fetchingFunc:{required:!0,tsType:{name:"signature",type:"function",raw:"(text: string) => Promise<any[]>",signature:{arguments:[{type:{name:"string"},name:"text"}],return:{name:"Promise",elements:[{name:"Array",elements:[{name:"any"}],raw:"any[]"}],raw:"Promise<any[]>"}}},description:""},selectedElement:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: any | undefined) => void",signature:{arguments:[{type:{name:"union",raw:"any | undefined",elements:[{name:"any"},{name:"undefined"}]},name:"e"}],return:{name:"void"}}},description:""},selectItem:{required:!0,tsType:{name:"any"},description:""},label:{required:!1,tsType:{name:"string"},description:""},st:{required:!1,tsType:{name:"ReactCSSProperties",raw:"React.CSSProperties"},description:""},id:{required:!1,tsType:{name:"string"},description:""},fullWidth:{required:!1,tsType:{name:"boolean"},description:""},className:{required:!1,tsType:{name:"string"},description:""},disabled:{required:!1,tsType:{name:"boolean"},description:""},readOnly:{required:!1,tsType:{name:"boolean"},description:""},required:{required:!1,tsType:{name:"boolean"},description:""},errText:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},helpText:{required:!1,tsType:{name:"string"},description:""},onFocus:{required:!1,tsType:{name:"union",raw:"React.FocusEventHandler<HTMLInputElement> | undefined",elements:[{name:"ReactFocusEventHandler",raw:"React.FocusEventHandler<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"undefined"}]},description:""},onBlur:{required:!1,tsType:{name:"union",raw:"React.FocusEventHandler<HTMLInputElement> | undefined",elements:[{name:"ReactFocusEventHandler",raw:"React.FocusEventHandler<HTMLInputElement>",elements:[{name:"HTMLInputElement"}]},{name:"undefined"}]},description:""},minLengthText:{required:!1,tsType:{name:"number"},description:""},defaultValue:{required:!1,tsType:{name:"string"},description:""}}};export{L as F};
